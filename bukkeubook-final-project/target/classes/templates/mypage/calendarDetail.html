<!DOCTYPE html>
<html xmlns:th="http://www.thymleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet"  th:href="@{/css/mypage/youchan.css}">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> 
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
<link href='https://cdn.jsdelivr.net/npm/fullcalendar@5.8.0/main.min.css' rel='stylesheet'/>  
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.8.0/main.min.js'></script>  
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.8.0/locales-all.min.js'></script>

</head>
<body>
<div th:replace="/common/topSideBar.html"></div>

	<h2 class="mb-4" id="main-text">마이페이지</h2>
	       <hr><br><br>
	       <h5 class="mb-4" id="sub-text">일정관리</h5>
	       <br>
	       
	      <div class="leftMar20">
         	 <table class="type03">
            <tr>
              <th>일정 제목</th>
              <td th:text="${ detailCal.title }"></td>
            </tr>
            <tr>
              <th>일정 시작일</th>
              <td th:text="${ detailCal.start }"></td>
            </tr>
            <tr>
              <th>일정 종료일</th>
              <td th:text="${ detailCal.end }"></td>
            </tr>
            <tr>
              <td colspan="2" style="height: 500px;" th:text="${ detailCal.content }"></td>
            </tr>
          </table>
          <button class="btn btn-info leftMar500p" type="submit" th:onclick="'location.href = \'' +  @{/mypage/calendar/update/(no=${detailCal.code})} + '\''">수정하기</button>
          <button class="btn btn-dark leftMar20p" id="deletebtn" type="button">삭제하기</button> 
      </div>
      <br><br>
	        
	       <script th:inline="javascript">
		        $().ready(function () {
		            $("#deletebtn").click(function () {
		                Swal.fire({
		                    title: '해당 일정을 삭제하시겠습니까?',
		                    text: "삭제된 일정은 캘린더에서 제거됩니다.",
		                    icon: 'warning',
		                    showCancelButton: true,
		                    confirmButtonColor: '#3085d6',
		                    cancelButtonColor: '#d33',
		                    confirmButtonText: '확인',
		                    cancelButtonText: '취소'
		                }).then((result) => {
		                    if (result.isConfirmed) {
		                    		
		                    		const no = [[${detailCal.code}]];
									location.href= '/mypage/calendar/delete/?no=' + no              
		                    }
		                })
		            });
	        });
	        </script>
	
</body>
</html>